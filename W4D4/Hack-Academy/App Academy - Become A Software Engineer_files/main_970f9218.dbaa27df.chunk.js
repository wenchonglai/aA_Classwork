(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"/7QA":function(e,t,n){"use strict";n.r(t);n("pNMO"),n("DEfu"),n("I9xj"),n("kSko"),n("zKZe"),n("uL8W"),n("Eqjn"),n("HRxU"),n("eoL8"),n("5xtp"),n("T63A"),n("3KgV"),n("wfmh"),n("5DmW"),n("27RR"),n("cDke"),n("NBAS"),n("Kxld"),n("yQYn"),n("4h0Y"),n("5D5o"),n("tkto"),n("v5b1"),n("W/eh"),n("zuhW"),n("r5Og"),n("ExoC"),n("07d7"),n("B6y2"),n("5s+n"),n("p532"),n("PKPk"),n("66V8"),n("8go2"),n("DrvE"),n("kCkZ"),n("3bBZ");var a=n("GMUs"),r=n("Nlet");Object(a.a)(function kickOff(){Object(r.a)(),Promise.all([n.e(36),n.e(34),n.e(26),n.e(32)]).then(n.bind(null,"V+70")).catch(function(e){return console.warn("loading root widget failed",e)})})},"9ttK":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var a=n("WwEg"),r=n("QtlZ"),c=(n("SFoa"),n("da4L"),n("LVcX")),i=function getAttributeFromCampaignOrDefault(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(c.a)(n,["attributes"].concat(Object(a.a)(t)),e)},o=function getCampaignFromEmbedById(e){return Object(c.a)([],["embed","configuration","campaigns"],r.a.getState()).filter(function(t){return t.id===e})[0]}},K7i0:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"n",function(){return c}),n.d(t,"m",function(){return i}),n.d(t,"p",function(){return o}),n.d(t,"i",function(){return s}),n.d(t,"k",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"e",function(){return l}),n.d(t,"q",function(){return b}),n.d(t,"h",function(){return v}),n.d(t,"j",function(){return p}),n.d(t,"f",function(){return f}),n.d(t,"l",function(){return O}),n.d(t,"o",function(){return E}),n.d(t,"d",function(){return g}),n.d(t,"s",function(){return I}),n.d(t,"r",function(){return m}),n.d(t,"b",function(){return j}),n.d(t,"g",function(){return _});var a=n("Cpup"),r=function clearActiveConversation(){return Object(a.a)({type:"CLEAR_ACTIVE_CONVERSATION"})},c=function setActiveConversation(e){return Object(a.a)({type:"SET_ACTIVE_CONVERSATION",payload:e})},i=function sendMessage(e){return Object(a.a)({type:"SEND_MESSAGE",payload:e})},o=function setHasForcedConversation(){return Object(a.a)({type:"SET_HAS_FORCED_CONVERSATION"})},s=function receiveMessageSent(e){return Object(a.a)({type:"RECEIVE_MESSAGE_SENT",payload:e})},u=function receivePreRenderedMessages(e){return Object(a.a)({type:"RECEIVE_PRE_RENDERED_MESSAGES",payload:e})},d=function receiveAgentMessage(e){return Object(a.a)({type:"RECEIVE_AGENT_MESSAGE",payload:e})},l=function receiveAttachments(e){return Object(a.a)({type:"RECEIVE_ATTACHMENTS",payload:e})},b=function setIsTyping(e){return Object(a.a)({type:"RECEIVE_IS_TYPING",payload:e})},v=function receiveConversation(e){return Object(a.a)({type:"RECEIVE_CONVERSATION",payload:e})},p=function receiveMessagesForConversation(e){return Object(a.a)({type:"RECEIVE_MESSAGES_FOR_CONVERSATION",payload:e})},f=function receiveBulkConversations(e){return Object(a.a)({type:"RECEIVE_BULK_CONVERSATIONS",payload:e})},O=function receiveReadMessages(e){return Object(a.a)({type:"RECEIVE_READ_MESSAGES",payload:e})},E=function setActiveDriftlink(e){return Object(a.a)({type:"SET_ACTIVE_DRIFTLINK",payload:e})},g=function receiveAgentStatus(e){return Object(a.a)({type:"RECEIVE_AGENT_STATUS",payload:e})},I=function setUnreadMessage(e){return Object(a.a)({type:"SET_UNREAD_MESSAGE",payload:e})},m=function setMatchedConversationRoutingRules(e){return Object(a.a)({type:"RECEIVED_MATCHED_CONVO_ROUTING_RULES",payload:e})},j=function permacloseConversation(e){return Object(a.a)({type:"PERMACLOSE_CONVERSATION",payload:e})},_=function receiveCampaignConversations(e){return Object(a.a)({type:"RECEIVE_CAMPAIGN_CONVERSATIONS",payload:e})}},"La++":function(e,t,n){"use strict";var a,r=n("nfbA"),c=n("mj2O"),i=n.n(c),o=n("7SM1"),s=n("xXFf"),u=n("QtlZ"),d=n("SsZN"),l=n("K7i0"),b=n("SFoa"),v=n("y0Ar"),p=n("g6eD"),f=n("2XY6"),O=n("NFvl"),E=n("vYqp"),g=n("hm8b"),I=n("vTYT"),m=n("YvIt"),j=n("MFhO"),_=n("PjZB"),C=n("0lfv"),A=n("7oto"),S=n("t8ds"),y=n("EQxi"),h=n("vjCh");!function(e){e[e.RENDERED=0]="RENDERED",e[e.ENROLLED=1]="ENROLLED"}(a||(a={}));var k=n("9ttK");n.d(t,"c",function(){return V}),n.d(t,"d",function(){return P}),n.d(t,"b",function(){return L}),n.d(t,"a",function(){return U});var R=["EMAIL_CAPTURE","ANNOUNCEMENT_ONE_TIME"],x=/\{\{[\s\w.'"\\|()]+\}\}/g,N=function generateCampaignFrame(e,t,n){return Object(A.a)({topic:"generate-new-frame",message:{name:e,height:t,width:n,path:"core/".concat(e),alignment:Object(b.i)()}})},T={SLIDER:function SLIDER(){return N(I.b.SLIDER,"100%","400px")},TAKEOVER:function TAKEOVER(){return N(I.b.TAKEOVER,"100%","100%")},WELCOME_MESSAGE:function WELCOME_MESSAGE(){return u.a.dispatch(Object(p.b)({chatOpen:!0}))}},M=function dispatchRenderForEmailCaptureCampaign(){return N(I.b.EMAIL_CAPTURE,"0px","400px")},w=function dispatchRenderForAnnouncementCampaign(e){var t=T[e];t&&t()},D=function(){var e=Object(o.a)(i.a.mark(function _callee(e){var t,n,a,r,c,o,d,l,b;return i.a.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(t=Object(k.a)(e,["message"],""),n=Object(k.a)(e,["automaticSender"],!1),a=Object(k.a)(e,["senderId"],null),!(null!==t.match(x))&&!n){i.next=13;break}return r=u.a.getState(),c=r.session,o=Object(O.a)(["endUser","id"],c),i.next=9,Object(s.c)({campaignId:e.id,senderId:Object(k.a)(e,["senderId"]),endUserId:o});case 9:d=i.sent,l=d.data,t=l.message,a=l.senderId;case 13:return b=Object(y.b)(t),i.abrupt("return",{message:b,senderId:a});case 15:case"end":return i.stop()}},_callee)}));return function resolveAnnouncementMessage(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(o.a)(i.a.mark(function _callee2(e,t){var n,a,c,o,s,l,b;return i.a.wrap(function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:if(n=Object(k.b)(e),!Object(f.a)(u.a.getState())&&n&&R.includes(n.type)){i.next=4;break}return i.abrupt("return");case 4:return a=Object(k.a)(n,["displayType"]),c=Object(k.a)(n,["playbookId"]),i.next=8,D(n);case 8:o=i.sent,s=o.message,l=o.senderId,b=Object.assign({},Object(r.a)(Object(r.a)({},n),{},{attributes:Object(r.a)(Object(r.a)({},n.attributes),{},{senderId:l})})),Object(d.p)({id:null,authorId:l,attributes:{playbookId:c,campaignId:e},conversationId:null}),Object(h.a)(b,s),Object(v.a)({playbookId:c,isVirtual:!0,isDelayed:t}),n.type===j.a.EMAIL_CAPTURE?M():w(a);case 16:case"end":return i.stop()}},_callee2)}));return function renderAnnouncementCampaign(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(o.a)(i.a.mark(function _callee3(e,t,n,c,o){var p,f,I,j,_,C,A;return i.a.wrap(function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:return p=Object(b.e)(),i.prev=1,f=Object(k.b)(e),I=Object(O.a)(["attributes","interactionId"],f),j=Object(O.a)(["inboxId"],f),i.next=7,L({playbookId:t,campaignId:e,interactionId:I,inboxId:j});case 7:if(_=i.sent){i.next=12;break}return Object(s.a)(e,n,c,p),S.b.sadd(m.a,e),i.abrupt("return",a.ENROLLED);case 12:return Object(h.a)(f),C=U(_.messages),A=_.isExperiment,Object(v.a)({playbookId:t,isVirtual:!0,isDelayed:o,isExperiment:A}),Object(d.p)(Object(r.a)(Object(r.a)({},C[0]),{},{id:null,conversationId:null})),u.a.dispatch(Object(l.k)({campaignId:e,messages:C,resumeFlowContext:Object(E.a)(g.a,_.resumeFlowContext)})),S.b.sadd(m.a,e),i.abrupt("return",a.RENDERED);case 22:return i.prev=22,i.t0=i.catch(1),Object(s.a)(e,n,c,p),S.b.sadd(m.a,e),i.abrupt("return",a.ENROLLED);case 27:case"end":return i.stop()}},_callee3,null,[[1,22]])}));return function renderBotCampaign(t,n,a,r,c){return e.apply(this,arguments)}}(),L=function(){var e=Object(o.a)(i.a.mark(function _callee4(e){var t,n,a,r,c,o;return i.a.wrap(function _callee4$(i){for(;;)switch(i.prev=i.next){case 0:return t=e.playbookId,n=e.campaignId,a=e.interactionId,r=e.inboxId,c=Object(b.e)(),i.prev=2,i.next=5,Object(s.b)({playbookId:t,campaignId:n,interactionId:a,inboxId:r,locale:c});case 5:if(200===(o=i.sent).status){i.next=8;break}return i.abrupt("return",null);case 8:return i.abrupt("return",o.data);case 11:return i.prev=11,i.t0=i.catch(2),Object(C.v)(["Failed to fetch pre-rendered playbook data for ".concat(t)]),i.abrupt("return",null);case 15:case"end":return i.stop()}},_callee4,null,[[2,11]])}));return function fetchPreRenderedPlaybookMessages(t){return e.apply(this,arguments)}}(),U=function applyChatContentTypeToPrerenderedMessages(e){return e?e.map(function(e){return Object(r.a)(Object(r.a)({},e),{},{contentType:_.c.CHAT})}):[]}},PCkZ:function(e,t,n){"use strict";var a=n("nfbA"),r=n("mj2O"),c=n.n(r),i=n("7SM1"),o=n("LqZ+"),s=n("QtlZ"),u=n("z8Kx"),d=n("vYqp"),l=n("hm8b"),b=n("LelF"),v=n("0lfv"),p=n("VYE+"),f=n("F8vJ"),O=n("Cpup"),E=function receiveIdentityMap(e){return Object(O.a)({type:"RECEIVE_IDENTITY_MAP",payload:e})},g=n("qSAj"),I={isEnabled:function isEnabled(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).eloqua_cookie_id_enabled},identify:function(){var e=Object(i.a)(c.a.mark(function _callee2(){var e,t,n,a,r=arguments;return c.a.wrap(function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:{},t=r.length>1?r[1]:void 0,n=e[b.g]){o.next=5;break}return o.abrupt("return",null);case 5:return a=function(){var e=Object(i.a)(c.a.mark(function _callee(){var e,a,r;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(g.a)({cookie:n,orgId:s.a.getState().embed.orgId,anonId:t});case 2:if(e=c.sent,a=e.data,(r=void 0===a?{}:a).email){c.next=7;break}return c.abrupt("return",null);case 7:return c.abrupt("return",{eloquaCookie:n,email:r.email});case 8:case"end":return c.stop()}},_callee)}));return function _identifyEloquaUser(){return e.apply(this,arguments)}}(),o.prev=6,o.next=9,a();case 9:return o.abrupt("return",o.sent);case 12:return o.prev=12,o.t0=o.catch(6),Object(v.v)(["Failed to identify eloqua user",o.t0]),o.abrupt("return",null);case 16:case"end":return o.stop()}},_callee2,null,[[6,12]])}));return function identify(){return e.apply(this,arguments)}}()},m=n("7oto"),j=function(){var e=Object(i.a)(c.a.mark(function _callee(e,t,n){var a,r,i;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(g.b)({utk:e,orgId:t,anonId:n});case 3:if(a=c.sent,r=a.data,(i=void 0===r?{}:r).email){c.next=8;break}return c.abrupt("return",null);case 8:return c.abrupt("return",{email:i.email});case 11:c.prev=11,c.t0=c.catch(0),Object(v.v)(["Failed to identify hubspot user",c.t0]);case 14:case"end":return c.stop()}},_callee,null,[[0,11]])}));return function identifyHubspotUser(t,n,a){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(c.a.mark(function _callee2(e,t){var n;return c.a.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(m.a)({topic:"hubspot-hsq-identity",message:{orgId:e,anonymousId:t}});case 2:if((n=a.sent)&&n.data){a.next=5;break}return a.abrupt("return");case 5:return a.abrupt("return",n.data);case 6:case"end":return a.stop()}},_callee2)}));return function identifyByHubspotAPI(t,n){return e.apply(this,arguments)}}(),C={isEnabled:function isEnabled(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).hubspot_js},identify:function(){var e=Object(i.a)(c.a.mark(function _callee3(e){var t,n,a,r;return c.a.wrap(function _callee3$(c){for(;;)switch(c.prev=c.next){case 0:return"hubspotutk",t=s.a.getState().embed.orgId,c.prev=2,c.next=5,Object(p.e)("hubspotutk");case 5:if(c.t0=c.sent,c.t0){c.next=10;break}return c.next=9,_(t,e);case 9:c.t0=c.sent;case 10:if(n=c.t0){c.next=13;break}return c.abrupt("return");case 13:return a={utk:n},c.next=16,j(n,t,e);case 16:return r=c.sent,a.isNewUtk=Object(v.m)(r),(null===r||void 0===r?void 0:r.email)&&(a.email=r.email),c.abrupt("return",a);case 22:c.prev=22,c.t1=c.catch(2),Object(v.v)(["Error attempting to identify hubspot user: ",c.t1]);case 25:case"end":return c.stop()}},_callee3,null,[[2,22]])}));return function identify(t){return e.apply(this,arguments)}}()},A=n("LVcX"),S={isEnabled:function isEnabled(){return function isIntegrationIdentityEnabled(e,t){return Object(A.a)(!1,["embed","configuration","integrations","integrationLookUp",t],e)}(s.a.getState(),"marketo")},identify:function(){var e=Object(i.a)(c.a.mark(function _callee2(){var e,t,n,a,r=arguments;return c.a.wrap(function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:{},t=r.length>1?r[1]:void 0,n=e[b.h]){o.next=5;break}return o.abrupt("return",null);case 5:return a=function(){var e=Object(i.a)(c.a.mark(function _callee(){var e,a,r;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(g.c)({munchkin:n,orgId:s.a.getState().embed.orgId,anonId:t});case 2:return e=c.sent,a=e.data,r=void 0===a?{}:a,c.abrupt("return",{email:r.email,munchkinCookie:n});case 6:case"end":return c.stop()}},_callee)}));return function _identifyMarketoUser(){return e.apply(this,arguments)}}(),o.prev=6,o.next=9,a();case 9:return o.abrupt("return",o.sent);case 12:o.prev=12,o.t0=o.catch(6),Object(v.v)(["Failed to identify marketo user",o.t0]);case 15:case"end":return o.stop()}},_callee2,null,[[6,12]])}));return function identify(){return e.apply(this,arguments)}}()},y=n("JBtm"),h=n.n(y),k={identify:function identify(){var e=Object(A.a)(null,["session","context","page","search"],s.a.getState());if(!e)return null;var t=h.a.parse(e);return t.d_utk?t.d_utk:null}},R={isEnabled:function isEnabled(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).pardot_cookie_id_enabled},identify:function(){var e=Object(i.a)(c.a.mark(function _callee2(){var e,t,n,a,r=arguments;return c.a.wrap(function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:{},t=r.length>1?r[1]:void 0,n=e[b.i]){o.next=5;break}return o.abrupt("return",null);case 5:return a=function(){var e=Object(i.a)(c.a.mark(function _callee(){var e,a,r;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(g.d)({cookie:n,orgId:s.a.getState().embed.orgId,anonId:t});case 2:return e=c.sent,a=e.data,r=void 0===a?{}:a,c.abrupt("return",{email:r.email,pardotCookie:n});case 6:case"end":return c.stop()}},_callee)}));return function _identifyPardotUser(){return e.apply(this,arguments)}}(),o.prev=6,o.next=9,a();case 9:return o.abrupt("return",o.sent);case 12:o.prev=12,o.t0=o.catch(6),Object(v.v)(["Failed to identify pardot user",o.t0]);case 15:case"end":return o.stop()}},_callee2,null,[[6,12]])}));return function identify(){return e.apply(this,arguments)}}()};n.d(t,"b",function(){return x}),n.d(t,"a",function(){return N}),n.d(t,"c",function(){return T});var x=function getIntegrationIdentityContext(){var e=s.a.getState().identity,t=void 0===e?{}:e,n=t.marketo_cookie,a=t.pardot_cookie,r=t.eloqua_cookie,c=t.hubspot_cookie,i={};return c&&(i.hubspot={utk:c.utk,isNewUtk:c.isNewUtk}),n&&(i.marketo={munchkinValue:n}),a&&(i.pardot={visitorId:a}),r&&(i.eloqua={cookie:r}),i},N=function(){var e=Object(i.a)(c.a.mark(function _callee(){var e,t,n,a,r,i;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return e=Object(u.b)(),c.next=3,Object(u.e)();case 3:if(t=c.sent,n=t.externalId,a=t.userJwt,!(!!n||!!a)){c.next=13;break}return c.next=10,L({id:n,email:e,userJwt:a});case 10:c.t0=c.sent,c.next=16;break;case 13:return c.next=15,M(e);case 15:c.t0=c.sent;case 16:return r=c.t0,i=Object(d.a)(l.a,r),s.a.dispatch(E(i)),c.abrupt("return",r);case 20:case"end":return c.stop()}},_callee)}));return function generateIdentity(){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(c.a.mark(function _callee2(e,t,n){var r,i,s;return c.a.wrap(function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,!t||U(t)){c.next=4;break}return Object(v.n)({data:["Unable to identify due to undefined userId"]}),c.abrupt("return");case 4:if(r=Object(a.a)({},n),!t||r.userJwt){c.next=11;break}return c.next=8,Object(u.e)();case 8:i=c.sent,(s=i.userJwt)&&(r.userJwt=s);case 11:return c.next=13,Object(o.c)(e,t,r);case 13:c.next=18;break;case 15:c.prev=15,c.t0=c.catch(0),Object(v.n)({data:[c.t0],type:"warn"});case 18:case"end":return c.stop()}},_callee2,null,[[0,15]])}));return function updateIdentity(t,n,a){return e.apply(this,arguments)}}(),M=function(){var e=Object(i.a)(c.a.mark(function _callee3(e){var t;return c.a.wrap(function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:return t={},n.next=3,P();case 3:return t.lead_id=n.sent,n.t0=Object,n.t1=t,n.next=8,w(t,e);case 8:return n.t2=n.sent,t=n.t0.assign.call(n.t0,n.t1,n.t2),n.t3=Object,n.t4=t,n.next=14,V(t);case 14:return n.t5=n.sent,t=n.t3.assign.call(n.t3,n.t4,n.t5),n.abrupt("return",t);case 17:case"end":return n.stop()}},_callee3)}));return function resolveIdentityProviders(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(i.a)(c.a.mark(function _callee4(e,t){return c.a.wrap(function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:return Object(f.a)(t)&&(e.email=t),D(e),n.abrupt("return",e);case 3:case"end":return n.stop()}},_callee4)}));return function resolveDirectIdentityProviders(t,n){return e.apply(this,arguments)}}(),D=function resolveOneShotIdentity(e){var t=k.identify();t&&(e.oneshot_token=t)},V=function(){var e=Object(i.a)(c.a.mark(function _callee5(e){var t,n,a,r,i,o,u,d,l;return c.a.wrap(function _callee5$(c){for(;;)switch(c.prev=c.next){case 0:return t=s.a.getState(),n=t.embed.configuration.gates,a=void 0===n?{}:n,c.next=4,Object(p.c)();case 4:if(r=c.sent,i=e.lead_id,!C.isEnabled(a)){c.next=11;break}return c.next=9,C.identify(i);case 9:(o=c.sent)&&(e.hubspot_cookie=o,o.email&&(e.email=o.email));case 11:if(!S.isEnabled()){c.next=16;break}return c.next=14,S.identify(r,i);case 14:(u=c.sent)&&(e.marketo_cookie=u.munchkinCookie,u.email&&(e.email=u.email));case 16:if(!R.isEnabled(a)){c.next=21;break}return c.next=19,R.identify(r,i);case 19:(d=c.sent)&&(e.pardot_cookie=d.pardotCookie,d.email&&(e.email=d.email));case 21:if(!I.isEnabled(a)){c.next=26;break}return c.next=24,I.identify(r,i);case 24:(l=c.sent)&&(e.eloqua_cookie=l.eloquaCookie,l.email&&(e.email=l.email));case 26:return c.abrupt("return",e);case 27:case"end":return c.stop()}},_callee5)}));return function resolveThirdPartyIdentityProviders(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(i.a)(c.a.mark(function _callee6(){var e,t,n;return c.a.wrap(function _callee6$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(p.e)(b.a);case 2:return e=a.sent,a.next=5,Object(p.e)(b.b);case 5:if(t=a.sent,e){a.next=14;break}if(!t){a.next=10;break}return Object(p.h)(b.a,t),a.abrupt("return",t);case 10:return n=Object(v.u)(),Object(p.h)(b.a,n),Object(p.h)(b.b,n),a.abrupt("return",n);case 14:return a.abrupt("return",e);case 15:case"end":return a.stop()}},_callee6)}));return function generateAnonymousIdentity(){return e.apply(this,arguments)}}(),L=function(){var e=Object(i.a)(c.a.mark(function _callee7(e){var t,n,a,r,i,o;return c.a.wrap(function _callee7$(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.id,n=e.email,a=e.userJwt,r={user_id:t},n&&(r.email=n),a&&(r.jwt=a),i=Object(u.c)()&&!a,o=!U(t),D(r),!i&&!o){c.next=13;break}return delete r.user_id,delete r.jwt,c.next=12,P();case 12:r.lead_id=c.sent;case 13:return c.abrupt("return",r);case 14:case"end":return c.stop()}},_callee7)}));return function generateExternalIdMap(t){return e.apply(this,arguments)}}(),U=function isValidExternalId(e){return!!e&&(!("undefined"===e)&&!("undefined-undefined"===e)&&!("d41d8cd98f00b204e9800998ecf8427e"===e))}},SFoa:function(e,t,n){"use strict";n.d(t,"f",function(){return l}),n.d(t,"c",function(){return b}),n.d(t,"d",function(){return v}),n.d(t,"b",function(){return p}),n.d(t,"i",function(){return f}),n.d(t,"g",function(){return O}),n.d(t,"a",function(){return g}),n.d(t,"e",function(){return I}),n.d(t,"h",function(){return m});var a=n("QtlZ"),r=n("da4L"),c=n("LVcX"),i=n("BCC6"),o=n("YsSj"),s=n("yzXs"),u=n("9A2/"),d=n("vTYT"),l=function getEmbedThemeProperty(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(c.a)(n,["configuration","theme",t],e)},b=function getCampaignIdFromInteractionId(e){var t=Object(c.a)(null,["embed","configuration","campaigns"],a.a.getState());if(t){var n=Object(i.a)(Object(o.a)(function hasInteractionId(t){return Object(r.a)(t,"interactionId")===e},t));if(n)return n.id}return null},v=function getCampaignPropertyById(e,t){var n=p(e);return n?Object(c.a)(null,[t],n):null},p=function getCampaignFromEmbedById(e){return Object(c.a)([],["embed","configuration","campaigns"],a.a.getState()).filter(function(t){return t.id===e})[0]},f=function getWidgetAlignment(){return Object(c.a)(d.a.RIGHT,["embed","configuration","theme","alignment"],a.a.getState())},O=function getOrgId(){return Object(c.a)(0,["embed","orgId"],a.a.getState())},E=Object(s.a)(Object(c.a)(void 0,["id"]),Object(u.a)(function(e){return e.bot}),Object(c.a)(void 0,["embed","configuration","team"])),g=function getBotSenderId(){return E(a.a.getState())},I=function getEmbedLocale(){return Object(c.a)("en",["embed","configuration","locale"],a.a.getState())},m=function getUseWidgetLocaleForGDPR(){return Object(c.a)(!1,["embed","configuration","dataProtection","targetBasedOnWidgetLocale"],a.a.getState())}},SsZN:function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"e",function(){return O}),n.d(t,"h",function(){return E}),n.d(t,"i",function(){return g}),n.d(t,"j",function(){return I}),n.d(t,"l",function(){return m}),n.d(t,"k",function(){return j}),n.d(t,"m",function(){return _}),n.d(t,"n",function(){return C}),n.d(t,"f",function(){return A}),n.d(t,"o",function(){return S}),n.d(t,"q",function(){return y}),n.d(t,"c",function(){return h}),n.d(t,"p",function(){return k}),n.d(t,"g",function(){return R}),n.d(t,"s",function(){return x}),n.d(t,"a",function(){return N}),n.d(t,"d",function(){return T}),n.d(t,"r",function(){return M});var a=n("mj2O"),r=n.n(a),c=n("7SM1"),i=n("nfbA"),o=n("QtlZ"),s=n("LVcX"),u=n("SWQ0"),d=n("6lNa"),l=n("0lfv"),b=n("wNJw"),v=function hydrateWithActiveCampaignData(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.a.getState(),n=t.campaigns,a=void 0===n?{}:n,r=t.conversations,c=void 0===r?{}:r;if(e&&e.conversationId){var u=Object(s.a)(null,["activeConversation"],c);if(e.conversationId!==u)return e}var d=Object(s.a)(null,["activeCampaign","attributes","campaignId"],a),l=Object(s.a)(null,["activeCampaign","attributes","startInteraction"],a),b=Object(s.a)(null,["activeCampaign","attributes","playbookId"],a);return Object(i.a)(Object(i.a)({},e),{},{campaignId:d,interactionId:l,playbookId:b})},p=function createMessageEventPayload(e){return v({inboxId:e.inboxId,conversationId:e.conversationId})},f=function triggerButtonClickedAPIEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(s.a)(null,["attributes","questionId"],e),n=v({createdAt:e.createdAt,authorId:e.authorId,conversationId:e.conversationId,buttonBody:e.body,questionId:t});Object(b.a)(u.b.CONVERSATION_BUTTON_CLICKED,n)},O=function triggerConversationFirstInteractionAPIEvent(e){var t=v({createdAt:e.createdAt,authorId:e.authorId});Object(b.a)(u.b.CONVERSATION_INTERACTED,t)},E=function triggerEmailCapturedAPIEvent(e){var t=e.email,n=o.a.getState().conversations,a=(void 0===n?{}:n).activeConversation||null,r={data:v({email:t,conversationId:a})};Object(b.a)(u.b.EMAIL_CAPTURED,r)},g=function triggerMeetingRequestedAPIEvent(e){var t=Object(s.a)([],["embed","configuration","team"],o.a.getState()).filter(function(t){return t.id===e});if(t.length){var n=t[0],a={teamMember:{id:n.id,name:n.name}};Object(b.a)(u.b.MEETING_REQUESTED,a)}},I=function triggerMeetingScheduledAPIEvent(e){var t=e.agentId,n=e.meetingTime,a=e.duration,r=e.timeZone,c=e.conversationId,i=Object(s.a)({},["conversations","messages",c],o.a.getState()),d=i[Object.keys(i)[0]],l=Object(s.a)([],["embed","configuration","team"],o.a.getState()).filter(function(e){return e.id===t})[0];if(d){var v=Object(s.a)(null,["attributes","campaignId"],d),p=Object(s.a)(null,["attributes","playbookId"],d),f=Object(s.a)(null,["attributes","startInteraction"],d),O={teamMember:{id:l.id,name:l.name},meeting:{time:n,duration:a,timeZone:r},conversationId:c,playbookId:p,campaignId:v,interactionId:f};Object(b.a)(u.b.MEETING_BOOKED,O)}},m=function triggerMessageSentAPIEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(b.a)(u.b.MESSAGE_SENT,p(e))},j=function triggerMessageReceivedAPIEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function getTeamUser(e){return e?Object(s.a)([],["embed","configuration","team"],o.a.getState()).find(function(t){return t.id===e}):null}(e.authorId)||{},n=Object(i.a)(Object(i.a)({},p(e)),{},{teamMember:{id:t.id,name:t.name}});Object(b.a)(u.b.MESSAGE_RECEIVED,n)},_=function triggerPhoneCapturedAPIEvent(e,t){var n=v({createdAt:e.createdAt,authorId:e.authorId,conversationId:e.conversationId,phone:t});Object(b.a)(u.b.PHONE_NUMBER_CAPTURED,n)},C=function triggerPlaybookClickedAPIEvent(e){var t=(e||{}).conversationId,n=v({conversationId:t});Object(b.a)(u.b.CONVERSATION_PLAYBOOK_CLICKED,n)},A=function triggerConversationSelectedAPIEvent(e){var t=v({conversationId:e});Object(b.a)(u.b.CONVERSATION_SELECTED,t)},S=function triggerPlaybookDismissedAPIEvent(e){var t=e||{},n=t.conversationId,a=t.id,r=v({conversationId:n,messageId:a});Object(b.a)(u.b.CONVERSATION_PLAYBOOK_DISMISSED,r)},y=function(){var e=Object(c.a)(r.a.mark(function _callee(e){var t;return r.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:t=Object(i.a)({botMessage:Object(l.h)(e)},v()),Object(b.a)(u.b.SLIDER_CLOSED,t);case 2:case"end":return n.stop()}},_callee)}));return function triggerSliderClosedAPIEvent(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(r.a.mark(function _callee2(e,t){var n,a,c;return r.a.wrap(function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if(e&&t){r.next=2;break}return r.abrupt("return");case 2:n=Object(s.a)(!1,["view","matchedTargeting"],o.a.getState()),a=Object(s.a)(!1,["targeting","isOnline"],o.a.getState()),c={campaignId:t,data:{isOnline:a,sidebarOpen:!1,widgetVisible:n}},r.t0=e,r.next=r.t0===d.b.CLICKED?8:r.t0===d.b.SUBMITTED?10:r.t0===d.b.OPENED?12:r.t0===d.b.DISMISSED?14:16;break;case 8:return Object(b.a)(u.b.CAMPAIGN_CLICKED,c),r.abrupt("break",17);case 10:return Object(b.a)(u.b.CAMPAIGN_SUBMITTED,c),r.abrupt("break",17);case 12:return Object(b.a)(u.b.CAMPAIGN_OPENED,c),r.abrupt("break",17);case 14:return Object(b.a)(u.b.CAMPAIGN_DISMISSED,c),r.abrupt("break",17);case 16:return r.abrupt("break",17);case 17:case"end":return r.stop()}},_callee2)}));return function triggerCampaignActionAPIEvent(t,n){return e.apply(this,arguments)}}(),k=function triggerPlaybookFiredAPIEvent(e){var t=e||{},n=t.authorId,a=t.conversationId,r=t.createdAt,c=t.id,i=t.attributes,o=(i=void 0===i?{playbookId:null,startInteraction:null,interactionId:null,campaignId:null}:i).playbookId,s=i.startInteraction,d=i.interactionId,l=i.campaignId;Object(b.a)(u.b.CONVERSATION_PLAYBOOK_FIRED,{messageId:c,createdAt:r,authorId:n,conversationId:a,interactionId:d||s,playbookId:o,campaignId:l})},R=function triggerConversationStartedAPIEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={inboxId:e.inboxId,conversationId:e.conversationId};Object(b.a)(u.b.CONVERSATION_STARTED,t)},x=function triggerWelcomeMessageAPIEvent(e){var t=e?u.b.WELCOME_MESSAGE_OPENED:u.b.WELCOME_MESSAGE_CLOSED;Object(b.a)(t)},N=function triggerAwayMessageAPIEvent(e){var t=e?u.b.AWAY_MESSAGE_OPENED:u.b.AWAY_MESSAGE_CLOSED;Object(b.a)(t)},T=function createTriggerChatVisibleAPIEvent(){var e=!1;return function(t){e!==(t=!!t)&&((t?[u.b.CHAT_OPENED,u.b.SIDEBAR_OPENED]:[u.b.CHAT_CLOSED,u.b.SIDEBAR_CLOSED]).forEach(function(e){return Object(b.a)(e)}),e=t)}}(),M=function triggerUserAttributesUpdatedEvent(){Object(b.a)(u.b.USER_ATTRIBUTES_UPDATED)}},TDUE:function(e,t,n){"use strict";var a=n("jm9a"),r=n("nfbA"),c=n("mj2O"),i=n.n(c),o=n("7SM1"),s=n("SHZQ"),u=n("hm8b"),d=n("mfas"),l=n("MFhO"),b=n("gG69"),v=n("0lfv"),p=n("t8ds"),f=n("QtlZ"),O=n("9ttK"),E=n("CYoe"),g=n("LVcX"),I=function getTimeToImpression(e){if(e&&!function hasSentImpression(){var e=f.a.getState().impressions;return(void 0===e?{}:e).hasSentImpression||!1}())return f.a.dispatch(Object(E.d)()),Date.now()-e},m=function(){var e=Object(o.a)(i.a.mark(function _callee(e){var t,n,a,c,o,s,d,l,b,p,E,m,C,A,S,y,h,k,R,x,N,T,M,w,D,V,P,L,U,F,G,B,H;return i.a.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(t=e.source,n=e.meta,a=void 0===n?{}:n,c=f.a.getState(),o=c.embed,s=void 0===o?{}:o,d=c.session,l=void 0===d?{}:d,b=c.conversations,p=void 0===b?{}:b,E=c.campaigns,m=void 0===E?{}:E,C=c.metrics,A=void 0===C?{}:C,i.prev=2,S=s.orgId,y=Object(g.a)(null,["endUser","id"],l),h=Object(g.a)(null,["activeCampaign","id"],m),k=a.conversationId||p.activeConversation,R=l.id,x=l.instanceId,N=Date.now(),T=Object(g.a)("",["context","page","url"],l),M=Object(g.a)("",["geo","country"],l),w=Object(g.a)("",["context","userAgent"],l),D=Object(u.a)(a.playbookId)?void 0:a.playbookId,V=Object(u.a)(a.interactionId)?void 0:a.interactionId,P=a.virtual||!1,L=a.isDelayed||!1,U=a.isExperiment?{isExperiment:a.isExperiment}:{},!j(t)){i.next=24;break}return G=Object(O.b)(h),B=Object(O.a)(G,["campaignReenrollmentType"],null),i.next=23,_(D,y,R,x,k,B,P);case 23:F=i.sent;case 24:return H=I(A.initTimestamp),i.abrupt("return",{orgId:S,endUserId:y,sessionId:R,sentAt:N,impressionSource:Object(r.a)({source:t,playbookId:D,interactionId:V,instanceId:x,virtual:P,widgetVersion:2,sendId:F,timeToImpression:H,delayed:L},U),context:{url:T,userAgent:w,country:M}});case 28:return i.prev=28,i.t0=i.catch(2),Object(v.f)(new Error("Failed to create impression event: ".concat(i.t0.message))),i.abrupt("return",null);case 32:case"end":return i.stop()}},_callee,null,[[2,28]])}));return function createImpressionEvent(t){return e.apply(this,arguments)}}();n.d(t,"b",function(){return j}),n.d(t,"a",function(){return _}),n.d(t,"d",function(){return C}),n.d(t,"c",function(){return S});var j=function isPlaybookImpressionEvent(e){return e===b.c.ACTIVE_PLAYBOOK||e===b.c.PASSIVE_PLAYBOOK},_=function(){var e=Object(o.a)(i.a.mark(function _callee(e,t,n,a,r,c,o){var s,u;return i.a.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(o){i.next=2;break}return i.abrupt("return",r?"CONVERSATION:".concat(r):void 0);case 2:if(t&&e&&n){i.next=4;break}return i.abrupt("return",s);case 4:i.t0=c,i.next=i.t0===l.b.ONCE?7:i.t0===l.b.ONCE_PER_SESSION?9:i.t0===l.b.ALWAYS?11:19;break;case 7:return s="ONCE:".concat(t,":").concat(e),i.abrupt("break",19);case 9:return s="ONCE_PER_SESSION:".concat(t,":").concat(e,":").concat(n),i.abrupt("break",19);case 11:return i.next=13,y(e);case 13:if(!(u=i.sent)){i.next=16;break}return i.abrupt("return",u);case 16:return s="ALWAYS:".concat(t,":").concat(e,":").concat(a),A(e,s),i.abrupt("break",19);case 19:return i.abrupt("return",s);case 20:case"end":return i.stop()}},_callee)}));return function getImpressionSendId(t,n,a,r,c,i,o){return e.apply(this,arguments)}}(),C=function(){var e=Object(o.a)(i.a.mark(function _callee2(e){var t,n,a=arguments;return i.a.wrap(function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:{},r.next=3,m({source:e,meta:t});case 3:if(!(n=r.sent)){r.next=13;break}return r.prev=5,Object(s.g)(n),r.abrupt("return",!0);case 10:r.prev=10,r.t0=r.catch(5),Object(v.v)(["Failed to send widget impression",r.t0]);case 13:return r.abrupt("return",!1);case 14:case"end":return r.stop()}},_callee2,null,[[5,10]])}));return function trackWidgetImpression(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(o.a)(i.a.mark(function _callee3(e,t){var n,c,o;return i.a.wrap(function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,p.b.get("ALWAYS_SEND_IDS");case 2:return n=i.sent,c=n.data,o=void 0===c?{}:c,i.next=7,p.b.set("ALWAYS_SEND_IDS",Object(r.a)(Object(r.a)({},o),{},Object(a.a)({},e,t)));case 7:case"end":return i.stop()}},_callee3)}));return function addSendIdToStore(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(o.a)(i.a.mark(function _callee4(e){var t,n,a;return i.a.wrap(function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.b.get("ALWAYS_SEND_IDS");case 2:return t=r.sent,n=t.data,a=Object(u.a)(n)?{}:Object(d.a)(["".concat(e)],n),r.next=7,p.b.set("ALWAYS_SEND_IDS",a);case 7:case"end":return r.stop()}},_callee4)}));return function removeSendIdFromStore(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(o.a)(i.a.mark(function _callee5(e){var t,n;return i.a.wrap(function _callee5$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.b.get("ALWAYS_SEND_IDS");case 2:return t=a.sent,n=t.data,a.abrupt("return",Object(u.a)(n)?null:n[e]);case 5:case"end":return a.stop()}},_callee5)}));return function getSendIdInStore(t){return e.apply(this,arguments)}}()},Wjfv:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return s});var a=n("Cpup"),r=function receiveActiveCampaign(e){return Object(a.a)({type:"RECEIVE_ACTIVE_CAMPAIGN",payload:e})},c=function clearActiveCampaign(){return Object(a.a)({type:"CLEAR_ACTIVE_CAMPAIGN"})},i=function receiveCampaignEvalId(e){return Object(a.a)({type:"RECEIVE_CAMPAIGN_EVAL_ID",payload:e})},o=function receiveIneligibleCampaigns(e){return Object(a.a)({type:"RECEIVE_INELIGIBLE_CAMPAIGNS",payload:e})},s=function receiveUnreadCampaigns(e){return Object(a.a)({type:"RECEIVE_UNREAD_CAMPAIGNS",payload:e})}},YA8z:function(e,t,n){"use strict";var a=n("X9/c"),r=n("U3QC"),c=n("icD7"),i=n("Cpup"),o={id:null,attributes:{},message:null},s={activeCampaign:o,campaignEvalId:null,ineligibleCampaignIds:[],unreadCampaigns:[],campaignConversations:[]},u={RECEIVE_ACTIVE_CAMPAIGN:function receiveActiveCampaignHandler(e){var t=e.action;e.draft.activeCampaign=t.payload.data},CLEAR_ACTIVE_CAMPAIGN:function clearActiveCampaignHandler(e){e.draft.activeCampaign=o},RECEIVE_CAMPAIGN_EVAL_ID:function receiveCampaignEvalIdHandler(e){var t=e.action;e.draft.campaignEvalId=t.payload.campaignEvalId},RECEIVE_UNREAD_CAMPAIGNS:function receiveUnreadCampaignsHandler(e){var t=e.action;e.draft.unreadCampaigns=t.payload},RECEIVE_INELIGIBLE_CAMPAIGNS:function receiveIneligibleCampaignsHandler(e){var t=e.action;e.draft.ineligibleCampaignIds=t.payload}},d=Object(i.b)(s,u),l=n("mj2O"),b=n.n(l),v=n("nfbA"),p=n("7SM1"),f=n("OE2q"),O=n("QtlZ"),E=n("SsZN"),g=n("zX3+"),I=n("LVcX"),m=n("z5yO"),j=n("K7i0"),_=n("bYXQ"),C=n("jm9a"),A=n("+/Je"),S=n("da4L"),y=n("hm8b"),h=n("i9gz"),k=n("O0zU"),R=n("weY7"),x=n("NFvl"),N=n("PjZB"),T=n("0lfv"),M=n("9xv8"),w=function mergeConversationStatus(e,t,n){e.conversationStatus[t]=Object(v.a)(Object(v.a)({},e.conversationStatus[t]),n)},D=function updateLastMessage(e,t){if(e.conversations[t.conversationId]){var n=e.conversations[t.conversationId].lastMessage;if(n&&Object(S.b)(t)<=Object(S.b)(n))return;e.conversations[t.conversationId].lastMessage=t}},V={SEND_MESSAGE:function sendMessageHandler(e){var t=e.action,n=e.draft,a=t.payload.message.conversationId;0===a&&(a=A.b),Object(y.a)(a)&&(a=A.a),n.activeConversation=a,n.chatOpen=!0,n.messages[a]=Object(v.a)(Object(v.a)({},n.messages[a]||{}),{},Object(C.a)({},t.payload.message.attributes.widgetGuid,t.payload.message)),n.conversations[a]||(n.conversations[a]={conversation:{id:a}}),D(n,t.payload.message)},RECEIVE_MESSAGE_SENT:function receiveMessageSentHandler(e){var t=e.action,n=e.draft,a=t.payload,r=a.message,c=a.isNew,i=void 0!==c&&c,o=a.isPreRendered,s=void 0!==o&&o;if(i){var u=s?A.b:A.a;n.messages[r.conversationId]=Object(v.a)(Object(v.a)({},n.messages[u]),{},Object(C.a)({},r.attributes.widgetGuid,r)),n.conversations[r.conversationId]=Object(v.a)(Object(v.a)({},n.conversations[u]),{},{conversation:Object(v.a)(Object(v.a)({},n.conversations[u].conversation),{},{id:r.conversationId})}),delete n.conversations[u],delete n.messages[u]}n.endUserEngaged=!0,i&&!s||Object(h.a)(r.body)||w(n,r.conversationId,{endUserResponded:!0}),n.messages[r.conversationId]=Object(v.a)(Object(v.a)({},n.messages[r.conversationId]),{},Object(C.a)({},r.attributes.widgetGuid,r)),n.activeConversation=r.conversationId,n.conversations[r.conversationId]||(n.conversations[r.conversationId]={conversation:{id:r.conversationId}}),D(n,r)},RECEIVE_PRE_RENDERED_MESSAGES:function receivePreRenderedMessagesHandler(e){var t=e.action,n=e.draft,a=t.payload,r=a.messages,c=a.resumeFlowContext;if(r&&r.length){var i=r.map(function(e,t){return Object(v.a)(Object(v.a)({},e),{},{id:t})});n.messages[A.b]=i,n.unreadAgentMessages[A.b]=i.map(function(e){return e.id}),n.resumeFlowContext=c,n.activeConversation=A.b}},RECEIVE_AGENT_MESSAGE:function receiveAgentMessageHandler(e){var t=e.action,n=e.draft,a=t.payload,r=(void 0===a?{}:a).message;r&&r.conversationId&&(n.messages[r.conversationId]=Object(v.a)(Object(v.a)({},n.messages[r.conversationId]),{},Object(C.a)({},r.id,r)),n.activeConversation!==r.conversationId&&(n.activeConversation=r.conversationId),D(n,r))},RECEIVE_CONVERSATION:function receiveConversationHandler(e){var t=e.action,n=e.draft,a=t.payload.conversation;n.conversations[a.conversation.id]=a},RECEIVE_INITIAL_ACTIVE_CONVERSATION:function receiveInitialActiveConversationHandler(e){var t=e.action,n=e.draft;n.activeConversation=t.payload.conversation.conversation.id,n.conversations[t.payload.conversation.conversation.id]=t.payload.conversation},RECEIVE_MESSAGES_FOR_CONVERSATION:function receiveMessagesForConversationHandler(e){var t=e.action,n=e.draft,a=t.payload,r=a.messages,c=a.conversationId,i=a.hasMoreMessages,o=void 0!==i&&i,s=a.nextPageMessageId,u=void 0===s?null:s;n.messages[c]=Object(v.a)(Object(v.a)({},n.messages[c]),Object(M.a)(r)),n.conversations[c]=Object(v.a)(Object(v.a)({},n.conversations[c]),{},{hasMoreMessages:o,nextPageMessageId:u});var d=r.filter(function unreadAgentMessages(e){return e.viewerRecipientStatus!==N.f.READ&&e.authorType===N.b.USER&&!!e.body&&!!e.body.length}).map(function(e){return e.id});n.unreadAgentMessages[c]=d;r.filter(function hasNonEmptyEndUserMessages(e){return(e.authorType===N.b.END_USER||e.authorType===N.b.LEAD)&&!!e.body&&!Object(h.a)(e.body)}).length>0&&w(n,c,{endUserResponded:!0})},RECEIVE_BULK_CONVERSATIONS:function receiveBulkConversationsHandler(e){var t=e.action,n=e.draft,a=t.payload.conversations.reduce(function(e,t){return e[t.conversation.id]=t,e},{});n.conversations=Object(k.a)(n.conversations,a)},SET_ACTIVE_CONVERSATION:function setActiveConversationHandler(e){var t=e.action;e.draft.activeConversation=t.payload.conversationId},CLEAR_ACTIVE_CONVERSATION:function clearActiveConversationHandler(e){e.draft.activeConversation=null},RECEIVE_READ_MESSAGES:function sendReadReceiptHandler(e){var t=e.action,n=e.draft,a=t.payload.conversationId;n.unreadAgentMessages[a]=[]},SET_UNREAD_MESSAGE:function setUnreadMessageHandler(e){var t=e.action,n=e.draft,a=t.payload.message;n.unreadAgentMessages[a.conversationId]?n.unreadAgentMessages[a.conversationId].push(a.id):n.unreadAgentMessages[a.conversationId]=[a.id]},RECEIVE_ATTACHMENTS:function receiveAttachments(e){var t=e.action,n=e.draft;n.attachments=Object(v.a)(Object(v.a)({},n.attachments),Object(T.b)(t.payload.attachments))},RECEIVE_IS_TYPING:function setIsTypingHandler(e){var t=e.action;e.draft.typingIndicators[t.payload.conversationId]=t.payload},SET_ACTIVE_DRIFTLINK:function setActiveDriftlinkHandler(e){var t=e.action;e.draft.activeDriftlink=t.payload},RECEIVE_AGENT_STATUS:function receiveAgentStatusHandler(e){var t=e.action,n=e.draft,a=t.payload,r=a.agentId,c=a.availability,i=a.lastActivity;n.agentPresence[r]={status:c,lastActivity:i}},RECEIVED_MATCHED_CONVO_ROUTING_RULES:function receiveMatchedConversationRoutingRulesHandler(e){var t=e.action;e.draft.matchedRoutingRules=t.payload},PERMACLOSE_CONVERSATION:function permacloseConversation(e){var t=e.action,n=e.draft,a=t.payload.conversationId;w(n,a,{permaclosed:!0})},SET_HAS_FORCED_CONVERSATION:function setHasForcedConversationHandler(e){e.draft.hasForcedConversation=!0},RECEIVE_CAMPAIGN_CONVERSATIONS:function receiveCampaignConversationsHandler(e){var t=e.action,n=e.draft,a=t.payload;if(!Object(T.m)(a)){var r=Object(T.a)(Object(R.a)(Object(x.a)(["conversation"]),t.payload));n.campaignConversations=r}}},P=Object(i.b)({endUserEngaged:!1,activeConversation:null,activeDriftlink:null,attachments:{},conversations:{},conversationStatus:{},typingIndicators:{},agentMessagesFromCurrentSession:{},messages:{},unreadAgentMessages:{},matchedRoutingRules:[],agentPresence:{},resumeFlowContext:{},hasForcedConversation:!1,campaignConversations:{}},V),L=n("qwiD"),U=n("OA1u"),F=n("Jstd"),G=n("vTYT"),B=n("8saY"),H=n("Nlet"),Y=n("VYE+"),$=n("7oto"),W=n("EQxi"),K=n("SFoa"),Z=["drift.click","drift.me","drift.com","driftqa.com","driftqa.me","driftqa.click"];var q=function handleWhitelistedUrls(){(function isWhitelistedUrl(){var e=Object(H.c)().url,t=Object(I.a)([],["embed","configuration","theme","urlWhitelist"],O.a.getState());if(Object(h.a)(t))return!0;if(Object(F.a)(function(t){return e.includes(t)})(Z))return!0;var n=t.map(function(e){return Object(W.c)(e)});return!!Object(F.a)(function(t){return e.includes(t)})(n)||(console.warn("The Drift widget is not allowed to load on this domain: ".concat(e)),!1)})()||Object($.a)({topic:"destroy-drift"})},Q=function handleFrameAlignment(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0)||Object(K.i)();e===G.a.LEFT&&Object($.a)({topic:"align-frames",message:{alignment:e}})},X=function processCustomIconPlacement(e){var t=Object(T.l)(navigator.userAgent)?"mobile":"desktop";if(Object(I.a)(B.d.DEFAULT,["configuration","theme","widgetIconPosition",t,"type"],e)!==B.d.DEFAULT){var n=e.configuration.theme.widgetIconPosition[t].spacing.bottom;Object($.a)({topic:"update-frame-vertical-offset",message:{offset:n}})}},J=function overrideVerticalOffset(e){Object(y.a)(e)||Object($.a)({topic:"update-frame-vertical-offset",message:{offset:e}})},z=function overrideCookieDomain(e){if(e){var t=Object(Y.f)([e]);t&&O.a.dispatch(Object(L.i)({cookieDomain:t}))}};var ee=n("FgEv"),te={configuration:{gates:[],dataProtection:{},theme:{awayMessage:null,welcomeMessage:null,team:[],userList:[],userListMode:void 0}},overrides:{}},ne={RECEIVE_EMBED_CONFIGURATION:function receiveEmbedConfigurationHandler(e){var t=e.action,n=e.draft,a=Object(v.a)(Object(v.a)({},n.configuration),t.payload.configuration);return Object(v.a)(Object(v.a)({},t.payload),{},{configuration:Object(ee.a)(a,n.overrides),overrides:n.overrides})},RECIEVE_EMBED_AWAY_MESSAGE:function receiveEmbedAwayMessageHandler(e){var t=e.action,n=e.draft,a=t.payload.message;void 0!==a&&a&&(n.configuration.theme.awayMessage=t.payload.message)},RECEIVE_EMBED_WELCOME_MESSAGE:function receiveEmbedWelcomeMessageHandler(e){var t=e.action,n=e.draft,a=t.payload,r=a.message,c=a.authorId;n.configuration.theme.welcomeMessage=r,c&&(n.configuration.autoAssigneeId=c)},RECEIVE_EMBED_CONFIGURATION_OVERRIDE:function receiveEmbedConfigurationOverrideHandler(e){var t=e.action,n=e.draft;n.overrides=t.payload,n.configuration=Object(ee.a)(n.configuration,t.payload)}},ae=Object(i.b)(te,ne),re={RECEIVE_IDENTITY_MAP:function receiveIdentityMapHandler(e){var t=e.action;e.draft;return t.payload}},ce=Object(i.b)({},re),ie=n("WwEg"),oe=n("0B8E"),se=n("TbSn"),ue=n("U505"),de={SET_HAS_SENT_IMPRESSION:function setHasSentImpressionHandler(e){e.draft.hasSentImpression=!0},RECEIVE_ACTIVE_CAMPAIGN:function receiveNewBotCampaignMessageHandler(e){var t=e.action,n=e.draft,a=Object(I.a)({},["data"],t.payload),r=Object(S.a)(a,"playbookId");n.active=Object(oe.a)([].concat(Object(ie.a)(n.active),[r]))},RECEIVE_INITIAL_ACTIVE_CONVERSATION:function receiveInitialActiveConversationHandler(e){var t=e.action,n=e.draft,a=Object(I.a)(null,["payload","conversation","conversation","id"],t);a&&(n.initialConversationId=a)},RECEIVE_MESSAGES_FOR_CONVERSATION:function receiveMessagesForConversationHandler(e){var t=e.action,n=e.draft,a=t.payload.messages,r=Object(se.a)(t.payload.messages),c=Object(S.e)(r,"startInteraction"),i=Object(F.a)(function(e){return e.viewerRecipientStatus===N.f.READ},a);if(c&&i&&r.conversationId===n.initialConversationId){var o=Object(S.a)(r,"playbookId");n.passive=Object(oe.a)([].concat(Object(ie.a)(n.passive),[o]))}},REMOVE_TRIGGERABLE_CAMPAIGN_IMPRESSION:function removeTriggerableCampaignImpressionHandler(e){var t=e.action,n=e.draft,a=t.payload,r=a.source,c=a.playbookId;"active"===r?n.active=Object(ue.a)([c],n.active):"passive"===r&&(n.passive=Object(ue.a)([c],n.passive))}},le=Object(i.b)({hasSentImpression:!1,initialConversationId:null,active:[],passive:[]},de),be=n("0g5b"),ve=n("sRvk"),pe=n("E1gY"),fe=n("AbXd"),Oe=n("sa5D"),Ee=n("8LPe"),ge=n("9OUN"),Ie=n("Obtf");n.d(t,"b",function(){return je}),n.d(t,"a",function(){return _e});var me=Object(ge.c)({view:Ee.a,embed:ae,metrics:be.a,session:pe.a,targeting:fe.a,conversations:P,campaigns:d,identity:ce,impressions:le}),je=function rootReducer(e,t){return"REPLACE_STATE"===t.type&&(e=t.payload.currentState),me(e,t)},_e=Object(Ie.a)(Oe.b,Oe.a,function sendMessageEpic(e,t){return e.pipe(Object(i.c)("SEND_MESSAGE"),Object(m.a)(function(){return"controller"===O.a.name}),Object(r.a)(function(){var e=Object(p.a)(b.a.mark(function _callee(e){var n,a,r,c,i,o,s,u;return b.a.wrap(function _callee$(d){for(;;)switch(d.prev=d.next){case 0:return n=e.payload,a=Object(I.a)({},["activeCampaign"],t.value.campaigns),r=t.value.conversations.activeConversation,c=Object(_.c)(r),i=function getConversationId(){return Object(I.a)(!1,["attributes","liveViewInitiated"],a)?Object(I.a)(null,["attributes","conversationId"],a):!c&&r?r:void 0},o=Object(v.a)(Object(v.a)({},n.message),{},{conversationId:i(),attributes:Object(v.a)(Object(v.a)({},n.message.attributes?n.message.attributes:{}),c?t.value.conversations.resumeFlowContext:{})}),d.next=8,Object(g.a)(o);case 8:if(s=d.sent){d.next=11;break}return d.abrupt("return");case 11:u=s.data,O.a.dispatch(Object(j.i)({message:u,isPreRendered:c,isNew:!n.message.conversationId}));case 13:case"end":return d.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}()),Object(c.a)())},function receiveMessageSentEpic(e,t){return e.pipe(Object(i.c)("RECEIVE_MESSAGE_SENT"),Object(m.a)(function(){return"controller"===O.a.name}),Object(r.a)(function(e){var t=e.payload.message;Object(_.a)(t)||Object(E.e)(t)}),Object(c.a)())},function onReceiveEmbedEpic(e){return e.pipe(Object(i.c)("RECEIVE_EMBED_CONFIGURATION"),Object(m.a)(function(){return"controller"===O.a.name}),Object(r.a)(function(e){return function processPayload(e){Q(),q(),X(e)}(e.payload)}),Object(c.a)())},ve.a,ve.b,function onReceiveEmbedOverrideEpic(e){return e.pipe(Object(i.c)("RECEIVE_EMBED_CONFIGURATION_OVERRIDE"),Object(m.a)(function(){return"controller"===O.a.name}),Object(r.a)(function(e){return function processOverridePayload(e){e&&Object.keys(e).forEach(function(t){var n=e[t];switch(t){case"verticalOffset":J(n);break;case"cookieDomain":z(n);break;case"campaignsEnabled":O.a.dispatch(Object(U.c)(!n))}})}(e.payload)}),Object(c.a)())},function checkPermacloseConversationEpic(e,t){return e.pipe(Object(i.c)("SET_ACTIVE_CONVERSATION"),Object(m.a)(function(){return"controller"===O.a.name}),Object(r.a)(function(){var e=Object(p.a)(b.a.mark(function _callee2(e){var n,a,r;return b.a.wrap(function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:if(!((n=e.payload.conversationId)<0)){c.next=3;break}return c.abrupt("return");case 3:if(!Object(I.a)(!1,["conversations","conversationStatus",n,"permaclosed"],t.value)){c.next=6;break}return c.abrupt("return");case 6:return c.next=8,Object(f.f)(n);case 8:a=c.sent,void 0!==(r=a.data.sentMessage)&&r&&O.a.dispatch(Object(j.b)({conversationId:n}));case 12:case"end":return c.stop()}},_callee2)}));return function(t){return e.apply(this,arguments)}}()),Object(c.a)())},function resizeControllerAfterCampaignClear(e,t){return e.pipe(Object(i.c)("CLEAR_ACTIVE_CAMPAIGN"),Object(r.a)(function(){var e=t.value.view;(void 0===e?{}:e).matchedTargeting||Object(a.a)()}),Object(c.a)())})},bYXQ:function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return d});var a=n("QtlZ"),r=n("+/Je"),c=n("LVcX"),i=n("DboL"),o=n("PjZB"),s=function isPrerenderedConversation(e){return e===r.b},u=function isNewConversation(e){return e===r.a},d=function conversationHasEndUserMessage(e){var t=Object(c.a)(null,["conversations","messages",e.conversationId.toString()],a.a.getState());return t&&Object(i.a)(t).some(function(t){return t.authorType!==o.b.USER&&!!t.body&&t.id!==e.id})}},qixE:function(e,t,n){"use strict";n.d(t,"a",function(){return m}),n.d(t,"b",function(){return _}),n.d(t,"e",function(){return S}),n.d(t,"d",function(){return h}),n.d(t,"c",function(){return k});var a=n("mj2O"),r=n.n(a),c=n("7SM1"),i=n("OE2q"),o=n("QtlZ"),s=n("SsZN"),u=n("K7i0"),d=n("bYXQ"),l=n("PCkZ"),b=n("LVcX"),v=n("DboL"),p=n("BCC6"),f=n("YvIt"),O=n("6lNa"),E=n("0lfv"),g=n("9xv8"),I=n("t8ds"),m=function(){var e=Object(c.a)(r.a.mark(function _callee(e,t){var n;return r.a.wrap(function _callee$(a){for(;;)switch(a.prev=a.next){case 0:a.t0=e,a.next=a.t0===O.b.LEAD_CAPTURED?3:a.t0===O.b.CLICKED?6:a.t0===O.b.SUBMITTED?6:a.t0===O.b.DISMISSED?6:a.t0===O.b.OPENED?6:11;break;case 3:return a.next=5,_(t);case 5:return a.abrupt("return",a.sent);case 6:return a.next=8,C(e,t);case 8:return n=a.sent,j(n,e),a.abrupt("break",12);case 11:return a.abrupt("break",12);case 12:case"end":return a.stop()}},_callee)}));return function createConversationEvent(t,n){return e.apply(this,arguments)}}(),j=function triggerAPIEventForConversationAction(e,t){var n=Object(b.a)(null,["attributes","campaignId"],e);n&&Object(s.c)(t,n)},_=function(){var e=Object(c.a)(r.a.mark(function _callee2(e){var t,n,a;return r.a.wrap(function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:if(e.email&&e.conversationId){r.next=2;break}return r.abrupt("return");case 2:return t={conversationId:e.conversationId,type:O.b.LEAD_CAPTURED,email:e.email,leadCapture:{email:e.email,integrations:Object(l.b)(),context:A()}},r.next=5,Object(i.h)(t);case 5:return n=r.sent,a=n.data,r.abrupt("return",a);case 8:case"end":return r.stop()}},_callee2)}));return function createLeadCapturedConversationEvent(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(c.a)(r.a.mark(function _callee3(e,t){var n,a,c;return r.a.wrap(function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:if(t.conversationId&&e){r.next=2;break}return r.abrupt("return");case 2:return n={type:e,conversationId:t.conversationId},r.next=5,Object(i.h)(n);case 5:return a=r.sent,c=a.data,r.abrupt("return",c);case 8:case"end":return r.stop()}},_callee3)}));return function captureConversationActionEvent(t,n){return e.apply(this,arguments)}}(),A=function _hydrateConversationEventContext(){var e=o.a.getState().session,t=(void 0===e?{}:e).context||{},n=t.userAgent,a=t.locale,r=t.timezone,c=t.page;return{page:void 0===c?{}:c,locale:a,timezone:r,userAgent:n}},S=function(){var e=Object(c.a)(r.a.mark(function _callee4(){var e,t,n,a,c,i,s,d,l;return r.a.wrap(function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:if(e=o.a.getState(),t=e.campaigns,n=void 0===t?{}:t,a=e.conversations,c=void 0===a?{}:a,!Object(b.a)(null,["activeCampaign","id"],n)&&!c.activeConversation){r.next=4;break}return r.abrupt("return",!1);case 4:return r.next=6,I.b.get(f.c);case 6:if(i=r.sent,s=i.data,d=Object(v.a)(c.conversations).map(function(e){return e.conversation}).filter(function(e){return e.createdAt>=s}),l=y(d)){r.next=12;break}return r.abrupt("return",!1);case 12:return o.a.dispatch(Object(u.n)({conversationId:l.id})),r.abrupt("return",!0);case 14:case"end":return r.stop()}},_callee4)}));return function showLatestSessionConversation(){return e.apply(this,arguments)}}(),y=function getMostRecentConversation(e){var t=Object(g.b)(e,"createdAt");return Object(p.a)(t)},h=function markMessageAsRead(e,t){try{Object(d.c)(e)||Object(i.a)(e,[t]),o.a.dispatch(Object(u.l)({conversationId:e}))}catch(n){Object(E.f)(new Error("Failed to mark message as read"),n)}},k=function markConversationAsRead(e){var t=o.a.getState().conversations,n=(void 0===t?{}:t).unreadAgentMessages[e]||[];if(n.length)try{Object(d.c)(e)||Object(i.a)(e,n),o.a.dispatch(Object(u.l)({conversationId:e}))}catch(a){Object(E.f)(new Error("Failed to mark conversation as read"),a)}}},vjCh:function(e,t,n){"use strict";var a=n("mj2O"),r=n.n(a),c=n("7SM1"),i=n("nfbA"),o=n("xXFf"),s=n("QtlZ"),u=n("SsZN"),d=n("Wjfv"),l=n("K7i0"),b=n("SFoa"),v=n("y0Ar"),p=n("TDUE"),f=n("da4L"),O=n("mfas"),E=n("LVcX"),g=n("TbSn"),I=n("NFvl"),m=n("vYqp"),j=n("hm8b"),_=n("YvIt"),C=n("MFhO"),A=n("PjZB"),S=n("0lfv"),y=n("t8ds"),h=n("La++"),k=n("9ttK");n.d(t,"a",function(){return R}),n.d(t,"b",function(){return x}),n.d(t,"i",function(){return N}),n.d(t,"h",function(){return T}),n.d(t,"c",function(){return M}),n.d(t,"e",function(){return w}),n.d(t,"f",function(){return D}),n.d(t,"d",function(){return P}),n.d(t,"g",function(){return L});var R=function assignActiveCampaignFromEmbed(e,t){var n=Object(k.a)(e,["displayType"]),a={id:e.id,attributes:Object(i.a)(Object(i.a)({},e.attributes),{},{message:t,campaignId:e.id,campaignDisplayType:n}),inboxId:e.inboxId};s.a.dispatch(Object(d.b)({data:a}))},x=function assignActiveCampaignFromMessage(e){var t=Object(f.a)(e,"campaignId");if(!t&&Object(f.e)(e,"startInteraction")){var n=Object(f.a)(e,"startInteraction");t=Object(b.c)(n)}var a=Object(O.a)(["attributes"],e),r={id:t,attributes:e.attributes||{},message:a,inboxId:e.inboxId};s.a.dispatch(Object(d.b)({data:r}))},N=function(){var e=Object(c.a)(r.a.mark(function _callee(e,t){var n;return r.a.wrap(function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,U(e);case 4:if(n=P(e),Object(k.a)(n,["campaignReenrollmentType"],null)!==C.b.ALWAYS){a.next=10;break}return a.next=9,Object(p.c)(t);case 9:return a.abrupt("return");case 10:case"end":return a.stop()}},_callee)}));return function storeAnnouncementCampaignCompleted(t,n){return e.apply(this,arguments)}}(),T=function showUnreadCampaign(e){var t=s.a.getState(),n=t.conversations,a=void 0===n?{}:n,r=t.campaigns,c=void 0===r?{}:r,o=a.activeDriftlink;if(!c.activeCampaign.id&&!o){var d=function getUnreadCampaignsById(){var e=s.a.getState().campaigns.unreadCampaigns,t={},n=!0,a=!1,r=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var o=c.value,u=Object(E.a)(null,["conversation","campaignId"],o);if(!u)return null;t[u]=o}}catch(d){a=!0,r=d}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return t}()[e];if(d){var b=d.conversation,p=void 0===b?{}:b,O=d.messages,g=void 0===O?[]:O,I=g[0],m=Object(f.a)(I,"playbookId"),j=Object(f.a)(I,"interactionId"),_=Object(f.a)(I,"isExperiment");s.a.dispatch(Object(l.h)({conversation:{conversation:p}})),s.a.dispatch(Object(l.j)({conversationId:p.id,messages:g})),s.a.dispatch(Object(l.n)({conversationId:p.id})),Object(u.p)(Object(i.a)(Object(i.a)({},I),{},{id:null,conversationId:null})),x(I),Object(v.a)({playbookId:m,interactionId:j,isExperiment:_})}}},M=function evaluateCampaignConversations(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=V(e);s.a.dispatch(Object(d.e)(t)),s.a.dispatch(Object(l.g)(e))},w=function getUnreadCampaignIds(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return V(e).map(function(e){return e.conversation.campaignId})},D=function getUnreadCampaignIdsFromStore(){return s.a.getState().campaigns.unreadCampaigns.map(function(e){return e.conversation.campaignId})},V=function getUnreadCampaigns(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.filter(function(e){return function isBotCampaign(e){return"CHAT"===Object(E.a)(null,["conversation","type"],e)}(e)&&function isFirstMessageUnread(e){var t=e.messages.filter(function(e){return""!==e.body});return Object(E.a)(null,[0,"viewerRecipientStatus"],t)!==A.f.READ}(e)})},P=function getCampaignFromEmbedById(e){return Object(E.a)([],["embed","configuration","campaigns"],s.a.getState()).filter(function(t){return t.id===e})[0]},L=function(){var e=Object(c.a)(r.a.mark(function _callee2(){var e,t,n,a,c,i,o,u,d,b,v,p,f;return r.a.wrap(function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,y.b.get(_.a);case 2:if(e=r.sent,t=e.data,n=void 0===t?[]:t,!Object(S.m)(n)){r.next=7;break}return r.abrupt("return",!1);case 7:if(a=Object(g.a)(n),c=s.a.getState(),i=c.conversations,o=(void 0===i?{}:i).campaignConversations,!(u=o[a])){r.next=14;break}return s.a.dispatch(Object(l.n)({conversationId:Object(I.a)(["id"],u)})),r.abrupt("return",!0);case 14:if(d=P(a)){r.next=17;break}return r.abrupt("return",!1);case 17:return b=Object(I.a)(["attributes","interactionId"],d),v=Object(I.a)(["attributes","playbookId"],d),r.next=21,Object(h.b)({playbookId:v,campaignId:a,interactionId:b,inboxId:d.inboxId});case 21:if(p=r.sent){r.next=24;break}return r.abrupt("return",!1);case 24:return f=Object(h.a)(p.messages),s.a.dispatch(Object(l.k)({campaignId:a,messages:f,resumeFlowContext:Object(m.a)(j.a,p.resumeFlowContext)})),r.abrupt("return",!0);case 27:case"end":return r.stop()}},_callee2)}));return function showLastCampaignInSession(){return e.apply(this,arguments)}}(),U=function(){var e=Object(c.a)(r.a.mark(function _callee3(e){var t,n,a,c;return r.a.wrap(function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return t=s.a.getState(),n=t.session,a=void 0===n?{}:n,r.prev=1,c=Object(E.a)(null,["endUser","id"],a),r.next=5,Object(o.d)({endUserId:c,campaignId:e,sessionId:a.campaignRefreshToken});case 5:return r.abrupt("return",r.sent);case 8:return r.prev=8,r.t0=r.catch(1),Object(S.f)("Failed to persist campaign interaction: ".concat(r.t0.message)),r.abrupt("return",null);case 12:case"end":return r.stop()}},_callee3,null,[[1,8]])}));return function triggerCampaignInteractionEvent(t){return e.apply(this,arguments)}}()},y0Ar:function(e,t,n){"use strict";var a=n("QtlZ"),r=n("Cpup"),c=n("gG69"),i=n("TDUE");n.d(t,"a",function(){return o});var o=function sendPlaybookImpression(e){var t=e.playbookId,n=e.interactionId,o=e.conversationId,s=e.isVirtual,u=void 0!==s&&s,d=e.isDelayed,l=void 0!==d&&d,b=e.isExperiment,v=a.a.getState().impressions,p=v.active,f=void 0===p?[]:p,O=v.passive,E=void 0===O?[]:O,g=f.includes(t),I=E.includes(t);(g||I)&&(Object(i.d)(g?c.c.ACTIVE_PLAYBOOK:c.c.PASSIVE_PLAYBOOK,{playbookId:t,interactionId:n,conversationId:o,virtual:u,isDelayed:l,isExperiment:b})&&a.a.dispatch(function removeTriggerableCampaignImpression(e){return Object(r.a)({type:"REMOVE_TRIGGERABLE_CAMPAIGN_IMPRESSION",payload:e})}({source:g?"active":"passive",playbookId:t})))}}}]);